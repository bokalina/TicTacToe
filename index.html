<!DOCTYPE html>
<html>

<head>
    <title>Tic Tac Toe</title>
    <style type="text/css">
    body table {
        border-collapse: collapse;
        width: 150px;
        margin: 10px;
    }

    body table td {
        width: 50px;
        height: 50px;
        border: 1px solid #555;
        cursor: pointer;
    }

    .x::before {
        content: "X";
    }

    .o::before {
        content: "O";
    }
    </style>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
</head>

<body>
    <h1>Tic Tac Toe</h1>
    <button title="Start new game!" id="start">Play</button>
    <div id="playground"></div>
    <p id="result" />
    <script type="text/javascript">
    $(document).ready(function() {
        var cells;
        var moves;
        // debugger;

        function refresh() {
            $("#playground").empty();
            var table = $("<table>")
            var tr;
            var td_id = $(this).attr("id");
            // debugger;

            $.each(cells, function(i) {
                if (!(i % 3) || !tr) {
                    tr = $("<tr>");
                };
                var td = $("<td>");
                td.attr("id", "cell_" + i);
                td.html(cells[i]);
                td.click(function() {
                    $("#result").text("You've clicked on cell number " + $(this).attr("id").split("_")[1] + ".");
                    if (cells[$(this).attr("id")]) {
                        return;
                    }
                    // debugger;
                    // var cls = moves.length % 2 == 0 ? "x" : "o"; // $("#" + $(this).attr("id")).attr("class", cls); // moves.push(cls); // cells[$(this).attr("id")] = cls;
                    if (moves.length % 2 == 0) {
                        $("#" + $(this).attr("id")).attr("class", "x");
                        moves.push("x");
                        cells[$(this).attr("id")] = "x";
                    } else {
                        $("#" + $(this).attr("id")).attr("class", "o");
                        moves.push("o");
                        cells[$(this).attr("id")] = "o";
                    }
                    if (moves.length >= 5) {
                        winner()
                    }
                    // if (moves.length >= 5) { // winner(); // }

                })
                table.append(tr.append(td));
            });
            $("#playground").append(table);
        }

        function winner() {
            if ($("#cell_0").hasClass("x") && $("#cell_1").hasClass("x") && $("#cell_2").hasClass("x") ||
                $("#cell_3").hasClass("x") && $("#cell_4").hasClass("x") && $("#cell_5").hasClass("x") ||
                $("#cell_6").hasClass("x") && $("#cell_7").hasClass("x") && $("#cell_8").hasClass("x") ||
                $("#cell_0").hasClass("x") && $("#cell_3").hasClass("x") && $("#cell_6").hasClass("x") ||
                $("#cell_1").hasClass("x") && $("#cell_4").hasClass("x") && $("#cell_7").hasClass("x") ||
                $("#cell_2").hasClass("x") && $("#cell_5").hasClass("x") && $("#cell_8").hasClass("x") ||
                $("#cell_0").hasClass("x") && $("#cell_4").hasClass("x") && $("#cell_8").hasClass("x") ||
                $("#cell_2").hasClass("x") && $("#cell_4").hasClass("x") && $("#cell_7").hasClass("x")) {
                alert("winner is x");
            } else if ($("#cell_0").hasClass("o") && $("#cell_1").hasClass("o") && $("#cell_2").hasClass("o") ||
                $("#cell_3").hasClass("o") && $("#cell_4").hasClass("o") && $("#cell_5").hasClass("o") ||
                $("#cell_6").hasClass("o") && $("#cell_7").hasClass("o") && $("#cell_8").hasClass("o") ||
                $("#cell_0").hasClass("o") && $("#cell_3").hasClass("o") && $("#cell_6").hasClass("o") ||
                $("#cell_1").hasClass("o") && $("#cell_4").hasClass("o") && $("#cell_7").hasClass("o") ||
                $("#cell_2").hasClass("o") && $("#cell_5").hasClass("o") && $("#cell_8").hasClass("o") ||
                $("#cell_0").hasClass("o") && $("#cell_4").hasClass("o") && $("#cell_8").hasClass("o") ||
                $("#cell_2").hasClass("o") && $("#cell_4").hasClass("o") && $("#cell_7").hasClass("o")) {
                alert("winner is o");
            } else {
                alert("nereseno")
            }
        }



        $("#start").click(function() {
            cells = ["", "", "", "", "", "", "", "", ""];
            moves = ["", "", "", "", "", "", "", "", ""];
            refresh();
        })

    })
    </script>
</body>

</html>